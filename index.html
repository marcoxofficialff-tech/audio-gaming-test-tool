<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio & Gaming Test Tool - Test Earbuds & Footsteps Detection</title>
    <meta name="description" content="Free online tool to test earbuds audio, measure latency, and train footsteps detection for gaming. Improve your BGMI/PUBG gameplay with our audio testing tools.">
    <meta name="keywords" content="earbud test, audio latency, footsteps detection, gaming audio, BGMI, PUBG, headphone test, sound test">
    <meta name="author" content="Audio Gaming Tools">
    
    <!-- Open Graph Meta Tags for Social Media Sharing -->
    <meta property="og:title" content="Audio & Gaming Test Tool - Test Your Earbuds & Gaming Audio">
    <meta property="og:description" content="Free online tool to test earbuds, measure audio latency, and train footsteps detection for BGMI/PUBG gaming.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourwebsite.com/audio-gaming-test">
    <meta property="og:image" content="https://yourwebsite.com/images/audio-test-preview.jpg">
    <meta property="og:site_name" content="Audio Gaming Tools">
    
    <!-- X Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Audio & Gaming Test Tool">
    <meta name="twitter:description" content="Test your earbuds, measure latency, and train footsteps detection for better gaming performance.">
    <meta name="twitter:image" content="https://yourwebsite.com/images/audio-test-preview.jpg">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5F0LN258E3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5F0LN258E3');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5724831664663663"
     crossorigin="anonymous"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --text-primary: #f8f9fa;
            --text-secondary: #a0a0c0;
            --card-bg: rgba(255, 255, 255, 0.05);
            --card-border: rgba(255, 255, 255, 0.1);
            --border-radius: 10px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        [data-theme="light"] {
            --bg-primary: #f0f2f5;
            --bg-secondary: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --card-bg: rgba(255, 255, 255, 0.7);
            --card-border: rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
            position: relative;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #4361ee, #4cc9f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Social Sharing Styles */
        .social-sharing {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .share-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: white;
            font-size: 0.95rem;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .share-facebook {
            background: #3b5998;
        }
        
        .share-x {
            background: #000000;
        }
        
        .share-whatsapp {
            background: #25d366;
        }
        
        .share-linkedin {
            background: #0077b5;
        }
        
        .share-reddit {
            background: #ff4500;
        }
        
        .share-telegram {
            background: #0088cc;
        }
        
        .share-copy {
            background: var(--primary);
        }
        
        .share-btn i {
            font-size: 1.1rem;
        }
        
        .share-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin: 25px 0;
            text-align: center;
            border: 1px solid var(--card-border);
        }
        
        .share-section h3 {
            margin-bottom: 20px;
            color: var(--success);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .share-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: var(--border-radius);
            font-weight: 600;
            display: none;
        }
        
        .share-message.success {
            background: rgba(76, 201, 240, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
            display: block;
        }
        
        .share-message.error {
            background: rgba(247, 37, 133, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
            display: block;
        }
        
        /* Results Share Section */
        .results-share {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            border: 1px solid var(--card-border);
        }
        
        .results-text {
            flex: 1;
        }
        
        .results-text h4 {
            margin-bottom: 5px;
            color: var(--success);
        }
        
        .share-results-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .share-results-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        /* Mobile responsiveness for social sharing */
        @media (max-width: 768px) {
            .social-sharing {
                flex-direction: column;
                align-items: center;
            }
            
            .share-btn {
                width: 200px;
                justify-content: center;
            }
            
            .results-share {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }

        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
        }

        .tab {
            padding: 12px 30px;
            cursor: pointer;
            border-radius: var(--border-radius);
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 0 5px;
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--card-border);
        }

        .card h2 {
            margin-bottom: 20px;
            color: var(--success);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2 i {
            font-size: 1.5rem;
        }

        .test-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .headphone-visualization {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            margin: 30px 0;
        }

        .earbud {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--card-bg);
            border: 2px solid var(--card-border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease;
        }

        .earbud.active {
            border-color: var(--primary);
            box-shadow: 0 0 15px var(--primary);
        }

        .earbud i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .earbud .earbud-status {
            font-size: 0.9rem;
            font-weight: 600;
        }

        .earbud .sound-wave {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            opacity: 0;
        }

        .earbud.active .sound-wave {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.7;
            }
            100% {
                transform: scale(1.3);
                opacity: 0;
            }
        }

        .ear-test {
            text-align: center;
            padding: 20px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #3aa8d0;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #d41c6a;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #df8512;
            transform: translateY(-2px);
        }

        .btn-lg {
            padding: 15px 30px;
            font-size: 1.2rem;
        }

        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            font-weight: 600;
        }

        .status.success {
            background: rgba(76, 201, 240, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status.error {
            background: rgba(247, 37, 133, 0.2);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        /* Latency Test Styles */
        .latency-container {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .latency-visual {
            height: 200px;
            margin: 30px 0;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .latency-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--card-bg);
            border: 3px solid var(--card-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .latency-circle.active {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.2);
            box-shadow: 0 0 20px var(--primary);
        }

        .latency-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .latency-good {
            color: var(--success);
        }

        .latency-average {
            color: var(--warning);
        }

        .latency-poor {
            color: var(--danger);
        }

        .latency-history {
            margin-top: 30px;
        }

        .history-bar {
            height: 20px;
            background: var(--card-bg);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
            position: relative;
        }

        .history-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .footsteps-test {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 15px;
            height: 400px;
            margin: 20px 0;
            position: relative;
        }

        .direction-btn {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .direction-btn:hover {
            background: rgba(67, 97, 238, 0.2);
            transform: scale(1.05);
        }

        .direction-btn.active {
            background: rgba(67, 97, 238, 0.3);
            border: 2px solid var(--primary);
        }

        .direction-btn.correct {
            background: rgba(76, 201, 240, 0.3);
            border: 2px solid var(--success);
        }

        .direction-btn.incorrect {
            background: rgba(247, 37, 133, 0.3);
            border: 2px solid var(--danger);
        }

        .direction-btn i {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .center-cell {
            grid-column: 2;
            grid-row: 2;
            background: rgba(67, 97, 238, 0.2);
            border: 2px solid var(--primary);
        }

        .player-icon {
            font-size: 3rem;
            color: var(--success);
        }

        .test-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .volume-control {
            margin-top: 20px;
        }

        .volume-slider {
            width: 100%;
            margin: 10px 0;
        }

        .instructions {
            margin-top: 20px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .instructions ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .accuracy-display {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .accuracy-value {
            font-size: 2rem;
            margin: 10px 0;
        }

        .accuracy-good {
            color: var(--success);
        }

        .accuracy-average {
            color: var(--warning);
        }

        .accuracy-poor {
            color: var(--danger);
        }

        .training-progress {
            margin: 20px 0;
            text-align: center;
        }

        .progress-bar {
            height: 10px;
            background: var(--card-bg);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--success);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Webcam Mic Test Style Earbud Test */
        .earbud-test-container {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .test-control-panel {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .sound-test-btn {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid var(--card-border);
            background: var(--card-bg);
        }

        .sound-test-btn:hover {
            transform: scale(1.05);
        }

        .sound-test-btn.left {
            border-color: var(--success);
        }

        .sound-test-btn.right {
            border-color: var(--warning);
        }

        .sound-test-btn.active {
            box-shadow: 0 0 20px;
        }

        .sound-test-btn.left.active {
            box-shadow: 0 0 20px var(--success);
        }

        .sound-test-btn.right.active {
            box-shadow: 0 0 20px var(--warning);
        }

        .sound-test-btn i {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .test-frequencies {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .frequency-btn {
            padding: 15px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .frequency-btn:hover {
            background: rgba(67, 97, 238, 0.2);
        }

        .frequency-btn.active {
            background: var(--primary);
            color: white;
        }

        @media (max-width: 768px) {
            .test-area {
                grid-template-columns: 1fr;
            }
            
            .footsteps-test {
                height: 350px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .headphone-visualization {
                flex-direction: column;
                gap: 20px;
            }
            
            .latency-stats {
                grid-template-columns: 1fr;
            }
            
            .test-control-panel {
                flex-direction: column;
                align-items: center;
            }
            
            .test-frequencies {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Audio & Gaming Test Tool</h1>
            <p class="subtitle">Test your earbuds audio quality, measure latency accurately, and train your footsteps detection skills for competitive gaming like BGMI and PUBG.</p>
            <div class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </div>
        </header>

        <!-- Social Sharing Section -->
        <div class="share-section">
            <h3><i class="fas fa-share-alt"></i> Share This Tool</h3>
            <p>Help other gamers improve their audio setup by sharing this tool</p>
            <div class="social-sharing">
                <button class="share-btn share-facebook" data-platform="facebook">
                    <i class="fab fa-facebook-f"></i>
                    <span>Facebook</span>
                </button>
                <button class="share-btn share-x" data-platform="x">
                    <i class="fab fa-x-twitter"></i>
                    <span>X</span>
                </button>
                <button class="share-btn share-whatsapp" data-platform="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp</span>
                </button>
                <button class="share-btn share-linkedin" data-platform="linkedin">
                    <i class="fab fa-linkedin-in"></i>
                    <span>LinkedIn</span>
                </button>
                <button class="share-btn share-reddit" data-platform="reddit">
                    <i class="fab fa-reddit-alien"></i>
                    <span>Reddit</span>
                </button>
                <button class="share-btn share-telegram" data-platform="telegram">
                    <i class="fab fa-telegram-plane"></i>
                    <span>Telegram</span>
                </button>
                <button class="share-btn share-copy" id="copyLinkBtn">
                    <i class="fas fa-link"></i>
                    <span>Copy Link</span>
                </button>
            </div>
            <div class="share-message" id="shareMessage"></div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="earbud-test">Earbud Test</div>
            <div class="tab" data-tab="latency-test">Latency Test</div>
            <div class="tab" data-tab="footsteps-test">Footsteps Training</div>
        </div>

        <!-- Earbud Test Tab -->
        <div class="tab-content active" id="earbud-test">
            <div class="card">
                <h2><i class="fas fa-headphones"></i> Earbud Sound Test</h2>
                <p>Test the left and right channels of your earbuds to ensure they're working correctly. Identify any audio imbalance or issues with individual earbuds.</p>
                
                <div class="earbud-test-container">
                    <div class="test-control-panel">
                        <div class="sound-test-btn left" id="testLeftEarbud">
                            <i class="fas fa-volume-up"></i>
                            <span>Left Earbud</span>
                        </div>
                        <div class="sound-test-btn right" id="testRightEarbud">
                            <i class="fas fa-volume-up"></i>
                            <span>Right Earbud</span>
                        </div>
                    </div>
                    
                    <div class="test-frequencies">
                        <div class="frequency-btn active" data-frequency="250">250 Hz</div>
                        <div class="frequency-btn" data-frequency="500">500 Hz</div>
                        <div class="frequency-btn" data-frequency="1000">1 kHz</div>
                        <div class="frequency-btn" data-frequency="2000">2 kHz</div>
                        <div class="frequency-btn" data-frequency="4000">4 kHz</div>
                        <div class="frequency-btn" data-frequency="8000">8 kHz</div>
                    </div>
                    
                    <div class="volume-control">
                        <label for="volume">Test Volume: <span id="volumeValue">50%</span></label>
                        <input type="range" id="volume" class="volume-slider" min="0" max="100" value="50">
                    </div>

                    <div class="status" id="earbudStatus">
                        Click on the left or right earbud button to test each side
                    </div>

                    <!-- Results Share Section for Earbud Test -->
                    <div class="results-share" id="earbudResultsShare" style="display: none;">
                        <div class="results-text">
                            <h4>Earbud Test Complete!</h4>
                            <p>Both earbuds are working correctly with balanced audio.</p>
                        </div>
                        <button class="share-results-btn" data-test="earbud">
                            <i class="fas fa-share"></i> Share Results
                        </button>
                    </div>

                    <div class="instructions">
                        <p><strong>How to test your earbuds:</strong></p>
                        <ul>
                            <li>Connect your earbuds or headphones to your device</li>
                            <li>Select a frequency to test different sound ranges</li>
                            <li>Adjust the volume to a comfortable level using the slider</li>
                            <li>Click "Left Earbud" and "Right Earbud" buttons to check each earbud</li>
                            <li>If you don't hear sound from one earbud, check connections or try different earbuds</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Latency Test Tab -->
        <div class="tab-content" id="latency-test">
            <div class="card">
                <h2><i class="fas fa-tachometer-alt"></i> Audio Latency Test</h2>
                <p>Measure the latency of your audio devices to identify delays that can impact gaming performance. Lower latency provides better synchronization between visual and audio cues.</p>
                
                <div class="latency-container">
                    <div class="latency-visual">
                        <div class="latency-circle" id="latencyCircle">
                            <span id="latencyDisplay">0 ms</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-warning btn-lg" id="startLatencyTest">
                        <i class="fas fa-hourglass-start"></i> Start Latency Test
                    </button>
                    
                    <div class="latency-stats">
                        <div class="stat-box">
                            <div>Current</div>
                            <div class="stat-value latency-good" id="currentLatency">0 ms</div>
                            <div>Latency</div>
                        </div>
                        <div class="stat-box">
                            <div>Average</div>
                            <div class="stat-value latency-average" id="averageLatency">0 ms</div>
                            <div>Latency</div>
                        </div>
                        <div class="stat-box">
                            <div>Best</div>
                            <div class="stat-value latency-good" id="bestLatency">0 ms</div>
                            <div>Latency</div>
                        </div>
                    </div>
                    
                    <!-- Results Share Section for Latency Test -->
                    <div class="results-share" id="latencyResultsShare" style="display: none;">
                        <div class="results-text">
                            <h4>Latency Test Results</h4>
                            <p>Your average latency: <span id="shareLatencyValue">0 ms</span> - <span id="shareLatencyStatus">Good for gaming</span></p>
                        </div>
                        <button class="share-results-btn" data-test="latency">
                            <i class="fas fa-share"></i> Share Results
                        </button>
                    </div>
                    
                    <div class="latency-history">
                        <h3>Latency History</h3>
                        <div class="history-bar">
                            <div class="history-fill" id="historyFill" style="width: 0%"></div>
                        </div>
                        <div id="latencyFeedback">Ready to test your audio latency</div>
                    </div>
                    
                    <div class="instructions">
                        <p><strong>How to test audio latency:</strong></p>
                        <ul>
                            <li>Click "Start Latency Test" to begin</li>
                            <li>You'll see a visual cue and hear a sound simultaneously</li>
                            <li>The test measures the delay between these events</li>
                            <li>Lower values (under 50ms) are better for gaming</li>
                            <li>Repeat the test multiple times for accurate results</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footsteps Test Tab -->
        <div class="tab-content" id="footsteps-test">
            <div class="card">
                <h2><i class="fas fa-shoe-prints"></i> Footsteps Direction Training</h2>
                <p>Train your ability to detect footsteps direction like in BGMI/PUBG. This continuous training mode helps improve your spatial awareness in competitive games.</p>
                
                <div class="accuracy-display">
                    <div>Your Accuracy</div>
                    <div class="accuracy-value accuracy-good" id="accuracyValue">100%</div>
                    <div id="accuracyFeedback">Training in progress...</div>
                </div>
                
                <div class="training-progress">
                    <div>Correct Guesses: <span id="correctCount">0</span> | Current Streak: <span id="streakCount">0</span></div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 100%"></div>
                    </div>
                </div>
                
                <div class="footsteps-test">
                    <div class="direction-btn" data-direction="northwest">
                        <i class="fas fa-arrow-up-left"></i>
                        <span>NW</span>
                    </div>
                    <div class="direction-btn" data-direction="north">
                        <i class="fas fa-arrow-up"></i>
                        <span>N</span>
                    </div>
                    <div class="direction-btn" data-direction="northeast">
                        <i class="fas fa-arrow-up-right"></i>
                        <span>NE</span>
                    </div>
                    
                    <div class="direction-btn" data-direction="west">
                        <i class="fas fa-arrow-left"></i>
                        <span>W</span>
                    </div>
                    <div class="direction-btn center-cell">
                        <i class="fas fa-street-view player-icon"></i>
                        <span>YOU</span>
                    </div>
                    <div class="direction-btn" data-direction="east">
                        <i class="fas fa-arrow-right"></i>
                        <span>E</span>
                    </div>
                    
                    <div class="direction-btn" data-direction="southwest">
                        <i class="fas fa-arrow-down-left"></i>
                        <span>SW</span>
                    </div>
                    <div class="direction-btn" data-direction="south">
                        <i class="fas fa-arrow-down"></i>
                        <span>S</span>
                    </div>
                    <div class="direction-btn" data-direction="southeast">
                        <i class="fas fa-arrow-down-right"></i>
                        <span>SE</span>
                    </div>
                </div>
                
                <!-- Results Share Section for Footsteps Training -->
                <div class="results-share" id="footstepsResultsShare" style="display: none;">
                    <div class="results-text">
                        <h4>Footsteps Training Complete!</h4>
                        <p>Your accuracy: <span id="shareAccuracyValue">100%</span> with a streak of <span id="shareStreakValue">0</span></p>
                    </div>
                    <button class="share-results-btn" data-test="footsteps">
                        <i class="fas fa-share"></i> Share Results
                    </button>
                </div>
                
                <div class="test-controls">
                    <button class="btn btn-success" id="startTraining">
                        <i class="fas fa-play"></i> Start Training
                    </button>
                    <button class="btn btn-danger" id="stopTraining">
                        <i class="fas fa-stop"></i> Stop Training
                    </button>
                    <button class="btn btn-primary" id="nextRound">
                        <i class="fas fa-forward"></i> Next Footstep
                    </button>
                </div>
                
                <div class="status" id="footstepsStatus">
                    Click "Start Training" to begin footsteps detection practice
                </div>
                
                <div class="instructions">
                    <p><strong>How to train your footsteps detection:</strong></p>
                    <ul>
                        <li>Click "Start Training" to begin the exercise</li>
                        <li>You will hear footsteps from a random direction</li>
                        <li>Click on the direction you think the sound came from</li>
                        <li>Training continues until you make a mistake</li>
                        <li>Try to achieve the highest streak possible!</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Audio & Gaming Test Tool &copy; 2023 | Use headphones for best results | Improve your gaming audio experience</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Social Sharing Functionality
            const shareButtons = document.querySelectorAll('.share-btn');
            const copyLinkBtn = document.getElementById('copyLinkBtn');
            const shareMessage = document.getElementById('shareMessage');
            const shareResultsButtons = document.querySelectorAll('.share-results-btn');
            
            // Page URL and sharing text
            const pageUrl = encodeURIComponent(window.location.href);
            const pageTitle = encodeURIComponent('Audio & Gaming Test Tool');
            const shareText = encodeURIComponent('Check out this awesome Audio & Gaming Test Tool! Test your earbuds, measure latency, and train footsteps detection for better gaming performance.');
            
            // Social sharing URLs
            const socialUrls = {
                facebook: `https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`,
                x: `https://twitter.com/intent/tweet?text=${shareText}&url=${pageUrl}`,
                whatsapp: `https://api.whatsapp.com/send?text=${shareText} ${pageUrl}`,
                linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`,
                reddit: `https://reddit.com/submit?url=${pageUrl}&title=${pageTitle}`,
                telegram: `https://t.me/share/url?url=${pageUrl}&text=${shareText}`
            };
            
            // Set up social sharing buttons
            shareButtons.forEach(button => {
                if (button.id !== 'copyLinkBtn') {
                    const platform = button.getAttribute('data-platform');
                    button.addEventListener('click', () => {
                        window.open(socialUrls[platform], '_blank', 'width=600,height=400');
                        showShareMessage(`Shared on ${platform.charAt(0).toUpperCase() + platform.slice(1)} successfully!`, 'success');
                    });
                }
            });
            
            // Copy link functionality
            copyLinkBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(window.location.href)
                    .then(() => {
                        showShareMessage('Link copied to clipboard!', 'success');
                    })
                    .catch(err => {
                        showShareMessage('Failed to copy link. Please try again.', 'error');
                        console.error('Could not copy text: ', err);
                    });
            });
            
            // Share results functionality
            shareResultsButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const testType = this.getAttribute('data-test');
                    let resultsText = '';
                    
                    switch(testType) {
                        case 'earbud':
                            resultsText = 'I just tested my earbuds with the Audio & Gaming Test Tool! Both earbuds are working perfectly.';
                            break;
                        case 'latency':
                            const latencyValue = document.getElementById('shareLatencyValue').textContent;
                            const latencyStatus = document.getElementById('shareLatencyStatus').textContent;
                            resultsText = `I measured my audio latency: ${latencyValue} - ${latencyStatus}. Test yours now!`;
                            break;
                        case 'footsteps':
                            const accuracyValue = document.getElementById('shareAccuracyValue').textContent;
                            const streakValue = document.getElementById('shareStreakValue').textContent;
                            resultsText = `I trained my footsteps detection: ${accuracyValue} accuracy with ${streakValue} streak! Can you beat my score?`;
                            break;
                    }
                    
                    const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(resultsText)}&url=${pageUrl}`;
                    window.open(shareUrl, '_blank', 'width=600,height=400');
                    showShareMessage('Results shared successfully!', 'success');
                });
            });
            
            // Function to show share messages
            function showShareMessage(message, type) {
                shareMessage.textContent = message;
                shareMessage.className = `share-message ${type}`;
                
                setTimeout(() => {
                    shareMessage.style.display = 'none';
                }, 3000);
            }
            
            // Show results share sections when tests are completed
            // For Earbud Test - show after both earbuds have been tested
            let leftTested = false;
            let rightTested = false;
            
            document.getElementById('testLeftEarbud').addEventListener('click', function() {
                leftTested = true;
                checkEarbudTestCompletion();
            });
            
            document.getElementById('testRightEarbud').addEventListener('click', function() {
                rightTested = true;
                checkEarbudTestCompletion();
            });
            
            function checkEarbudTestCompletion() {
                if (leftTested && rightTested) {
                    document.getElementById('earbudResultsShare').style.display = 'flex';
                }
            }
            
            // For Latency Test - show after first test completion
            document.getElementById('startLatencyTest').addEventListener('click', function() {
                // Simulate showing results share after test completion
                setTimeout(() => {
                    document.getElementById('latencyResultsShare').style.display = 'flex';
                    document.getElementById('shareLatencyValue').textContent = document.getElementById('averageLatency').textContent;
                    
                    const latency = parseFloat(document.getElementById('averageLatency').textContent);
                    let status = 'Excellent for gaming!';
                    if (latency > 100) status = 'Could be better for gaming';
                    else if (latency > 50) status = 'Good for gaming';
                    
                    document.getElementById('shareLatencyStatus').textContent = status;
                }, 2000);
            });
            
            // For Footsteps Training - show when training ends
            document.getElementById('stopTraining').addEventListener('click', function() {
                document.getElementById('footstepsResultsShare').style.display = 'flex';
                document.getElementById('shareAccuracyValue').textContent = document.getElementById('accuracyValue').textContent;
                document.getElementById('shareStreakValue').textContent = document.getElementById('streakCount').textContent;
            });
            
            // Theme toggle functionality
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('i');
            
            // Check for saved theme preference or default to dark
            const currentTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            // Update icon based on current theme
            if (currentTheme === 'light') {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
            
            themeToggle.addEventListener('click', function() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                
                // Update icon
                if (newTheme === 'light') {
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
            });
            
            // Tab switching functionality
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Show active tab content
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === tabId) {
                            content.classList.add('active');
                        }
                    });
                });
            });
            
            // Audio context for sound generation
            let audioContext;
            let volume = 0.5;
            let currentFrequency = 250;
            
            // Initialize audio context on first user interaction
            function initAudio() {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                return audioContext;
            }
            
            // Volume control
            const volumeSlider = document.getElementById('volume');
            const volumeValue = document.getElementById('volumeValue');
            
            volumeSlider.addEventListener('input', function() {
                volume = this.value / 100;
                volumeValue.textContent = `${this.value}%`;
            });
            
            // Earbud test functions - Webcam Mic Test style
            const testLeftEarbud = document.getElementById('testLeftEarbud');
            const testRightEarbud = document.getElementById('testRightEarbud');
            const earbudStatus = document.getElementById('earbudStatus');
            const frequencyButtons = document.querySelectorAll('.frequency-btn');
            
            // Set up frequency selection
            frequencyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    frequencyButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentFrequency = parseInt(this.getAttribute('data-frequency'));
                });
            });
            
            function playTestSound(channel) {
                const audioCtx = initAudio();
                
                // Create oscillator
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                
                // Configure oscillator with selected frequency
                oscillator.type = 'sine';
                oscillator.frequency.value = currentFrequency;
                
                // Configure gain (volume)
                gainNode.gain.value = volume;
                
                // Connect nodes based on channel
                if (channel === 'left') {
                    const panNode = audioCtx.createStereoPanner();
                    panNode.pan.value = -1; // Full left
                    oscillator.connect(panNode);
                    panNode.connect(gainNode);
                    
                    // Visual feedback
                    testLeftEarbud.classList.add('active');
                    setTimeout(() => {
                        testLeftEarbud.classList.remove('active');
                    }, 1000);
                } else if (channel === 'right') {
                    const panNode = audioCtx.createStereoPanner();
                    panNode.pan.value = 1; // Full right
                    oscillator.connect(panNode);
                    panNode.connect(gainNode);
                    
                    // Visual feedback
                    testRightEarbud.classList.add('active');
                    setTimeout(() => {
                        testRightEarbud.classList.remove('active');
                    }, 1000);
                } else {
                    oscillator.connect(gainNode);
                }
                
                gainNode.connect(audioCtx.destination);
                
                // Play sound
                oscillator.start();
                
                // Stop after 1 second
                setTimeout(() => {
                    oscillator.stop();
                }, 1000);
                
                return channel;
            }
            
            testLeftEarbud.addEventListener('click', function() {
                playTestSound('left');
                earbudStatus.textContent = `Playing ${currentFrequency}Hz tone in left earbud`;
                earbudStatus.className = "status success";
            });
            
            testRightEarbud.addEventListener('click', function() {
                playTestSound('right');
                earbudStatus.textContent = `Playing ${currentFrequency}Hz tone in right earbud`;
                earbudStatus.className = "status success";
            });
            
            // Latency test
            const startLatencyTest = document.getElementById('startLatencyTest');
            const latencyCircle = document.getElementById('latencyCircle');
            const latencyDisplay = document.getElementById('latencyDisplay');
            const currentLatency = document.getElementById('currentLatency');
            const averageLatency = document.getElementById('averageLatency');
            const bestLatency = document.getElementById('bestLatency');
            const historyFill = document.getElementById('historyFill');
            const latencyFeedback = document.getElementById('latencyFeedback');
            
            let latencyTests = [];
            let testInProgress = false;
            
            startLatencyTest.addEventListener('click', function() {
                if (testInProgress) return;
                
                testInProgress = true;
                latencyCircle.classList.add('active');
                latencyDisplay.textContent = "Testing...";
                
                // Visual and audio cue
                const audioCtx = initAudio();
                const startTime = performance.now();
                
                // Create beep sound
                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                
                oscillator.type = 'sine';
                oscillator.frequency.value = 1000;
                
                gainNode.gain.value = volume;
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.1);
                
                // Measure response time
                const measureLatency = () => {
                    const endTime = performance.now();
                    const latency = endTime - startTime;
                    
                    // Update display
                    latencyDisplay.textContent = `${latency.toFixed(2)} ms`;
                    currentLatency.textContent = `${latency.toFixed(2)} ms`;
                    
                    // Update color based on latency
                    if (latency < 50) {
                        currentLatency.className = "stat-value latency-good";
                        latencyFeedback.textContent = "Excellent! Low latency suitable for competitive gaming.";
                    } else if (latency < 100) {
                        currentLatency.className = "stat-value latency-average";
                        latencyFeedback.textContent = "Good latency for casual gaming.";
                    } else {
                        currentLatency.className = "stat-value latency-poor";
                        latencyFeedback.textContent = "High latency may affect gaming experience.";
                    }
                    
                    // Store result
                    latencyTests.push(latency);
                    
                    // Calculate average
                    const avg = latencyTests.reduce((a, b) => a + b, 0) / latencyTests.length;
                    averageLatency.textContent = `${avg.toFixed(2)} ms`;
                    
                    // Update average color
                    if (avg < 50) {
                        averageLatency.className = "stat-value latency-good";
                    } else if (avg < 100) {
                        averageLatency.className = "stat-value latency-average";
                    } else {
                        averageLatency.className = "stat-value latency-poor";
                    }
                    
                    // Update best latency
                    const best = Math.min(...latencyTests);
                    bestLatency.textContent = `${best.toFixed(2)} ms`;
                    
                    // Update history visualization
                    const maxLatency = Math.max(100, ...latencyTests);
                    const fillPercentage = Math.min(100, (latency / maxLatency) * 100);
                    historyFill.style.width = `${fillPercentage}%`;
                    
                    // Reset for next test
                    setTimeout(() => {
                        latencyCircle.classList.remove('active');
                        testInProgress = false;
                    }, 1000);
                };
                
                // Wait for user to perceive the cue and respond
                setTimeout(measureLatency, 10);
            });
            
            // Footsteps training
            const directionButtons = document.querySelectorAll('.direction-btn[data-direction]');
            const startTrainingBtn = document.getElementById('startTraining');
            const stopTrainingBtn = document.getElementById('stopTraining');
            const nextRoundBtn = document.getElementById('nextRound');
            const footstepsStatus = document.getElementById('footstepsStatus');
            const accuracyValue = document.getElementById('accuracyValue');
            const accuracyFeedback = document.getElementById('accuracyFeedback');
            const correctCount = document.getElementById('correctCount');
            const streakCount = document.getElementById('streakCount');
            const progressFill = document.getElementById('progressFill');
            
            let trainingActive = false;
            let currentDirection = null;
            let trainingResults = {
                total: 0,
                correct: 0,
                currentStreak: 0,
                bestStreak: 0
            };
            
            // Preload footstep sound
            let footstepSound = null;
            const audio = new Audio();
            audio.src = 'https://cdn.pixabay.com/download/audio/2022/03/15/audio_106711d0c0.mp3?filename=footsteps-stairs-slow-106711.mp3';
            audio.preload = 'auto';
            
            audio.addEventListener('canplaythrough', function() {
                footstepSound = audio;
                console.log('Footstep sound loaded');
            });
            
            function getRandomDirection() {
                const directions = ['northwest', 'north', 'northeast', 'west', 'east', 'southwest', 'south', 'southeast'];
                return directions[Math.floor(Math.random() * directions.length)];
            }
            
            function playDirectionalFootsteps(direction) {
                if (!footstepSound) {
                    // Fallback to generated sound if real sound isn't loaded
                    playGeneratedFootsteps(direction);
                    return;
                }
                
                const audioCtx = initAudio();
                
                // Create audio source from the loaded sound
                const source = audioCtx.createMediaElementSource(footstepSound);
                
                // Create pan node for directional audio
                const panNode = audioCtx.createStereoPanner();
                
                // Set pan based on direction
                let panValue = 0;
                
                switch(direction) {
                    case 'northwest':
                        panValue = -0.7;
                        break;
                    case 'north':
                        panValue = -0.3;
                        break;
                    case 'northeast':
                        panValue = 0.7;
                        break;
                    case 'west':
                        panValue = -1;
                        break;
                    case 'east':
                        panValue = 1;
                        break;
                    case 'southwest':
                        panValue = -0.7;
                        break;
                    case 'south':
                        panValue = 0.3;
                        break;
                    case 'southeast':
                        panValue = 0.7;
                        break;
                    default:
                        panValue = 0;
                }
                
                panNode.pan.value = panValue;
                
                // Create gain node for volume control
                const gainNode = audioCtx.createGain();
                gainNode.gain.value = volume;
                
                // Connect the audio graph
                source.connect(panNode);
                panNode.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                // Play the sound
                footstepSound.currentTime = 0;
                footstepSound.play();
            }
            
            function playGeneratedFootsteps(direction) {
                const audioCtx = initAudio();
                
                // Create a more realistic footstep sound
                const bufferSize = audioCtx.sampleRate * 0.3;
                const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
                const data = buffer.getChannelData(0);
                
                // Generate noise
                for (let i = 0; i < bufferSize; i++) {
                    // Create a footstep-like envelope
                    const envelope = (i < bufferSize * 0.1) ? 
                        i / (bufferSize * 0.1) : // Attack
                        1 - ((i - bufferSize * 0.1) / (bufferSize * 0.9)); // Decay
                    
                    // Mix noise with a low frequency for the "thump"
                    const noise = (Math.random() * 2 - 1) * 0.7;
                    const thump = Math.sin(i * 0.05) * 0.3;
                    
                    data[i] = (noise + thump) * envelope;
                }
                
                // Create source and filters
                const source = audioCtx.createBufferSource();
                source.buffer = buffer;
                
                const lowpass = audioCtx.createBiquadFilter();
                lowpass.type = 'lowpass';
                lowpass.frequency.value = 800;
                
                const highpass = audioCtx.createBiquadFilter();
                highpass.type = 'highpass';
                highpass.frequency.value = 80;
                
                const gainNode = audioCtx.createGain();
                gainNode.gain.value = volume * 0.5;
                
                // Create pan node for directional audio
                const panNode = audioCtx.createStereoPanner();
                
                // Set pan based on direction
                let panValue = 0;
                
                switch(direction) {
                    case 'northwest':
                        panValue = -0.7;
                        break;
                    case 'north':
                        panValue = -0.3;
                        break;
                    case 'northeast':
                        panValue = 0.7;
                        break;
                    case 'west':
                        panValue = -1;
                        break;
                    case 'east':
                        panValue = 1;
                        break;
                    case 'southwest':
                        panValue = -0.7;
                        break;
                    case 'south':
                        panValue = 0.3;
                        break;
                    case 'southeast':
                        panValue = 0.7;
                        break;
                    default:
                        panValue = 0;
                }
                
                panNode.pan.value = panValue;
                
                // Connect the audio graph
                source.connect(lowpass);
                lowpass.connect(highpass);
                highpass.connect(panNode);
                panNode.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                // Play the sound
                source.start();
            }
            
            function startNewRound() {
                if (!trainingActive) return;
                
                // Reset button styles
                directionButtons.forEach(btn => {
                    btn.classList.remove('correct', 'incorrect');
                });
                
                // Select random direction
                currentDirection = getRandomDirection();
                
                // Play footsteps sound
                playDirectionalFootsteps(currentDirection);
                
                footstepsStatus.textContent = "Footsteps played! Click where you think the sound came from.";
                footstepsStatus.className = "status";
            }
            
            function checkGuess(guessedDirection) {
                if (!trainingActive || !currentDirection) return;
                
                trainingResults.total++;
                
                if (guessedDirection === currentDirection) {
                    // Correct guess
                    trainingResults.correct++;
                    trainingResults.currentStreak++;
                    
                    if (trainingResults.currentStreak > trainingResults.bestStreak) {
                        trainingResults.bestStreak = trainingResults.currentStreak;
                    }
                    
                    // Update UI
                    const accuracy = Math.round((trainingResults.correct / trainingResults.total) * 100);
                    accuracyValue.textContent = `${accuracy}%`;
                    
                    if (accuracy >= 80) {
                        accuracyValue.className = "accuracy-value accuracy-good";
                        accuracyFeedback.textContent = "Excellent! You have great directional hearing!";
                    } else if (accuracy >= 60) {
                        accuracyValue.className = "accuracy-value accuracy-average";
                        accuracyFeedback.textContent = "Good! Keep practicing to improve.";
                    } else {
                        accuracyValue.className = "accuracy-value accuracy-poor";
                        accuracyFeedback.textContent = "Keep practicing! Try to focus on subtle audio cues.";
                    }
                    
                    correctCount.textContent = trainingResults.correct;
                    streakCount.textContent = trainingResults.currentStreak;
                    
                    // Highlight correct button
                    const correctBtn = document.querySelector(`.direction-btn[data-direction="${currentDirection}"]`);
                    correctBtn.classList.add('correct');
                    
                    footstepsStatus.textContent = `Correct! The sound was coming from ${currentDirection.toUpperCase()}.`;
                    footstepsStatus.className = "status success";
                    
                    // Continue training with next round
                    setTimeout(startNewRound, 1500);
                } else {
                    // Incorrect guess - end training
                    trainingResults.currentStreak = 0;
                    streakCount.textContent = "0";
                    
                    // Highlight correct and incorrect buttons
                    const correctBtn = document.querySelector(`.direction-btn[data-direction="${currentDirection}"]`);
                    const incorrectBtn = document.querySelector(`.direction-btn[data-direction="${guessedDirection}"]`);
                    
                    correctBtn.classList.add('correct');
                    incorrectBtn.classList.add('incorrect');
                    
                    footstepsStatus.textContent = `Training ended! The sound was coming from ${currentDirection.toUpperCase()}, not ${guessedDirection.toUpperCase()}. Your final accuracy: ${Math.round((trainingResults.correct / trainingResults.total) * 100)}%`;
                    footstepsStatus.className = "status error";
                    
                    trainingActive = false;
                }
                
                // Update progress bar
                const progress = trainingResults.currentStreak / Math.max(trainingResults.bestStreak, 1) * 100;
                progressFill.style.width = `${progress}%`;
            }
            
            startTrainingBtn.addEventListener('click', function() {
                trainingActive = true;
                footstepsStatus.textContent = "Training started! Listen carefully to the footsteps.";
                footstepsStatus.className = "status success";
                startNewRound();
            });
            
            stopTrainingBtn.addEventListener('click', function() {
                trainingActive = false;
                footstepsStatus.textContent = "Training stopped.";
                footstepsStatus.className = "status";
                
                // Reset button styles
                directionButtons.forEach(btn => {
                    btn.classList.remove('correct', 'incorrect');
                });
            });
            
            nextRoundBtn.addEventListener('click', function() {
                if (trainingActive) {
                    startNewRound();
                }
            });
            
            directionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    if (!trainingActive) return;
                    
                    const direction = this.getAttribute('data-direction');
                    checkGuess(direction);
                });
            });
        });
    </script>
</body>
</html>
